<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.gmaking.growth.dao.GrowthDAO">

    <insert id="insertNewImageRecord" useGeneratedKeys="true" keyProperty="imageId">
        INSERT INTO tb_image (
        IMAGE_URL, USER_ID, CREATED_DATE, UPDATED_DATE
        ) VALUES (
        #{imageUrl}, #{userId}, NOW(), NOW()
        )
    </insert>

    <update id="updateCharacterEvolution">
        UPDATE tb_character
        SET
        EVOLUTION_STEP = #{newStep},
        IMAGE_ID = #{newImageId},
        UPDATED_DATE = NOW()
        WHERE
        CHARACTER_ID = #{characterId}
        AND USER_ID = #{userId}
    </update>
</mapper>